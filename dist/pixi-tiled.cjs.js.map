{"version":3,"file":"pixi-tiled.cjs.js","sources":["../src/objects/TiledContainer.ts","../src/Config.ts","../src/objects/TiledAnimator.ts","../src/tools/TiledObjectType.ts","../src/objects/TiledPrimitives.ts","../src/tools/Utils.ts","../src/objects/TiledSprite.ts","../src/builders/ContainerBuilder.ts","../src/builders/SpriteBuilder.ts","../src/builders/TextBuilder.ts","../src/tools/TiledMultiSheet.ts","../src/tools/TilesetManagers.ts","../src/objects/TiledMapContainer.ts","../src/tools/TiledObjectParser.ts","../src/pixi-utils/ContainerExt.ts","../src/pixi-utils/DisplayExt.ts","../src/pixi-utils/EventEmitterExt.ts","../src/pixi-utils/index.ts","../src/layers/LayerBuilder.ts","../src/layers/ObjectsLayerBuilder.ts","../src/layers/TiledLayerBuilder.ts","../src/index.ts"],"sourcesContent":["import type { Text } from '@pixi/text';\nimport { Container } from '@pixi/display';\nimport type { ITiledPtimitive } from './TiledPrimitives';\nimport type { Rectangle } from '@pixi/math'\nimport type { IParsedProps, ITiledLayer, ITiledObject, ITiledFrame, ITiledMap } from './../ITiledMap';\n\nexport class TiledContainer extends Container {\n\tlayerHeight: number = 0;\n\tlayerWidth: number = 0;\n\ttext?: Text;\n\tprimitive?: ITiledPtimitive;\n\ttiledId?: number;\n\tproperties?: IParsedProps;\n\tlayers?: {[key: string]: Container};\n\tsource?: ITiledLayer | ITiledObject | ITiledMap;\n\ttileFrame?: ITiledFrame;\n\tname?: string;\n\ttypes?: string[];\n\thitArea?: Rectangle;\n}\n","import { Point } from \"@pixi/math\";\nimport { ILayerBuilder } from \"./layers/LayerBuilder\";\n\nexport interface ITiledProps {\n\tdefSpriteAnchor: Point;\n\tdebugContainers: boolean;\n\tusePixiDisplay: boolean;\n\troundFontAlpha: boolean;\n\tinjectMiddleware: boolean;\n\troundPixels: boolean;\n}\n\nexport const Config: ITiledProps = {\n\tdefSpriteAnchor: new Point(0, 1),\n\tdebugContainers: false,\n\tusePixiDisplay: false,\n\troundFontAlpha: false,\n\tinjectMiddleware: true,\n\troundPixels: true\n};\n\nexport const LayerBuildersMap: { [key: string]: ILayerBuilder | undefined } = {};\n","import { TiledSprite } from \"./TiledSprite\";\nimport { AnimatedSprite, FrameObject } from \"@pixi/sprite-animated\";\nimport { ITiledTile } from \"./../ITiledMap\";\n\nexport class TileAnimator {\n\tprivate _animator: AnimatedSprite;\n\tprivate _childs: Set<TiledSprite> = new Set();\n\tprivate _tile: ITiledTile;\n\n\tconstructor(tile: ITiledTile) {\n\n\t\tif(!tile.animation) {\n\t\t\tthrow new Error(\"Tile has not animation!\");\n\t\t}\n\n\t\tthis._tile = tile;\n\t\tthis._animator = new AnimatedSprite(<FrameObject[]> <any> tile.animation);\n\t\tthis._animator.onFrameChange = this.__onFrame.bind(this);\n\t}\n\n\t__onFrame() {\n\t\tthis._childs.forEach((e)=> e.texture = <any> this._animator.texture);\n\t}\n\n\tget anim() {\n\t\treturn this._animator;\n\t}\n\n\tadd(s: TiledSprite, strict = true) {\n\t\tif(!s) return;\n\n\t\t// prevent stack \n\t\tif(this._childs.has(s)) return;\n\t\t\n\t\ts.anim = this;\n\n\t\tif(s.tileFrame !== this._tile && strict) {\n\t\t\tthrow (`Invalid sprite! One Animator per tile type! Pased ${s.tileFrame!.id} should be ${this._tile.id}`);\n\t\t}\n\n\t\tthis._childs.add(s);\n\t}\n\n\tremove(s: TiledSprite) {\n\t\tthis._childs.delete(s);\n\t}\n}","export enum TiledObjectType {\n\tDEFAULT,\n\tPOINT,\n\tPOLYGON,\n\tPOLYLINE,\n\tELLIPSE,\n\tTEXT,\n\tIMAGE,\n}\n\n// https://doc.mapeditor.org/en/stable/reference/json-map-format/\n\nexport function Objectype(meta: any): TiledObjectType {\n\tif (meta.properties && meta.properties.container) return TiledObjectType.DEFAULT;\n\tif (meta.gid || meta.image) return TiledObjectType.IMAGE;\n\tif (meta.text != undefined) return TiledObjectType.TEXT;\n\tif (meta.point) return TiledObjectType.POINT;\n\tif (meta.polygon) return TiledObjectType.POLYGON;\n\tif (meta.polyline) return TiledObjectType.POLYLINE;\n\tif (meta.ellipse) return TiledObjectType.ELLIPSE;\n\n\treturn TiledObjectType.DEFAULT;\n}","import { Rectangle, Point, Polygon, Ellipse } from \"@pixi/math\";\nimport { ITiledObject } from \"./../ITiledMap\";\nimport { TiledObjectType, Objectype } from \"../tools/TiledObjectType\";\n\nexport interface ITiledPtimitive {\n\tname: string;\n\ttypes: Array<string>;\n\tvisible: boolean;\n}\n\nexport class TiledRect extends Rectangle implements ITiledPtimitive {\n\tname: string = \"\";\n\ttypes: string[] = [];\n\tvisible: boolean = true;\n}\n\nexport class TiledPoint extends Point implements ITiledPtimitive {\n\tname: string = \"\";\n\ttypes: string[] = [];\n\tvisible: boolean = true;\n\n\tconstructor(x?: number, y?: number) {\n\t\tsuper(x, y);\n\t}\n}\n\nexport class TiledPolygon extends Polygon implements ITiledPtimitive {\n\tname: string = \"\";\n\ttypes: string[] = [];\n\tvisible: boolean = true;\n\n\tprivate _x: number = 0;\n\tprivate _y: number = 0;\n\n\tconstructor(points: Point[]) {\n\t\tsuper(points);\n\t}\n\n\tset x(sX: number) {\n\t\tconst delta = sX - this._x;\n\t\tthis._x = sX;\n\n\t\tfor (let xIndex = 0; xIndex < this.points.length; xIndex += 2) {\n\t\t\tthis.points[xIndex] += delta;\n\t\t}\n\t}\n\n\tset y(sY: number) {\n\t\tconst delta = sY - this._y;\n\t\tthis._y = sY;\n\n\t\tfor (let yIndex = 1; yIndex < this.points.length; yIndex += 2) {\n\t\t\tthis.points[yIndex] += delta;\n\t\t}\n\t}\n\n\tget x(): number {\n\t\treturn this._x;\n\t}\n\n\tget y(): number {\n\t\treturn this._y;\n\t}\n\n\tgetBounds(): Rectangle {\n\t\tlet rect = new Rectangle();\n\n\t\tlet maxX: number = this._x;\n\t\tlet maxY: number = this._y;\n\n\t\tfor (let index = 0; index < this.points.length; index += 2) {\n\t\t\tconst px = this.points[index];\n\t\t\tconst py = this.points[index + 1];\n\n\t\t\trect.x = px < rect.x ? px : rect.x;\n\t\t\trect.y = py < rect.y ? py : rect.y;\n\n\t\t\tmaxX = px > maxX ? px : maxX;\n\t\t\tmaxY = py > maxY ? py : maxY;\n\t\t}\n\n\t\trect.width = maxX - rect.x;\n\t\trect.height = maxY - rect.y;\n\n\t\treturn rect;\n\t}\n\n\tget width(): number {\n\t\treturn this.getBounds().width;\n\t}\n\n\tget height(): number {\n\t\treturn this.getBounds().height;\n\t}\n\n\tset height(h: number) {\n\t\tconst factor = h / this.height;\n\n\t\tfor (let yIndex = 1; yIndex < this.points.length; yIndex += 2) {\n\t\t\tconst delta = (this.points[yIndex] - this._y) * factor;\n\t\t\tthis.points[yIndex] = this._y + delta;\n\t\t}\n\t}\n\n\tset width(w: number) {\n\t\tconst factor = w / this.width;\n\n\t\tfor (let xIndex = 0; xIndex < this.points.length; xIndex += 2) {\n\t\t\tconst delta = (this.points[xIndex] - this._x) * factor;\n\t\t\tthis.points[xIndex] = this._x + delta;\n\t\t}\n\t}\n}\n\nexport class TiledPolypine implements ITiledPtimitive {\n\tname: string = \"\";\n\ttypes: string[] = [];\n\tvisible: boolean = true;\n\n\tpoints: Array<Point> = [];\n\n\tconstructor(points: Array<Point>) {\n\t\tthis.points = points.slice();\n\t}\n}\n\nexport class TiledEllipse extends Ellipse implements ITiledPtimitive {\n\tname: string = \"\";\n\ttypes: string[] = [];\n\tvisible: boolean = true;\n\n\tconstructor(x?: number, y?: number, hw?: number, hh?: number) {\n\t\tsuper(x, y, hw, hh);\n\t}\n}\n\nexport function BuildPrimitive( meta: ITiledObject ): ITiledPtimitive | undefined {\n\t\n\tif (!meta) {\n\t\treturn;\n\t}\n\n\tlet prim: ITiledPtimitive | undefined = undefined;\n\n\tconst type: TiledObjectType = Objectype(meta);\n\n\tmeta.x = meta.x || 0;\n\tmeta.y = meta.y || 0;\n\n\tswitch (type) {\n\t\tcase TiledObjectType.ELLIPSE: {\n\t\t\tprim = new TiledEllipse(\n\t\t\t\tmeta.x + 0.5 * meta.width,\n\t\t\t\tmeta.y + 0.5 * meta.height,\n\t\t\t\tmeta.width * 0.5,\n\t\t\t\tmeta.height * 0.5\n\t\t\t);\n\t\t\tbreak;\n\t\t}\n\t\tcase TiledObjectType.POLYGON: {\n\t\t\tconst points = meta.polygon!;\n\t\t\tconst poses = points.map(p => {\n\t\t\t\treturn new Point(p.x + meta.x, p.y + meta.y);\n\t\t\t});\n\t\t\t\n\t\t\tprim = new TiledPolygon(poses);\n\t\t\tbreak;\n\t\t}\n\t\tcase TiledObjectType.POLYLINE: {\n\t\t\tconst points = meta.polyline!;\n\t\t\tconst poses = points.map(p => {\n\t\t\t\treturn new Point(p.x + meta.x, p.y + meta.y);\n\t\t\t});\n\n\t\t\tprim = new TiledPolypine(poses);\n\t\t\tbreak;\n\t\t}\n\t\tdefault:\n\t\t\tprim = new TiledRect(meta.x, meta.y, meta.width, meta.height);\n\t}\n\n\tprim.types = meta.type ? meta.type.split(\":\") : [];\n\tprim.visible = meta.visible;\n\tprim.name = meta.name;\n\t\n\treturn prim;\n}\n","import {\n\tITiledTileset,\n\tITiledMap,\n\tIParsedProps,\n\tITiledLayer,\n\tITiledObject,\n\tITiledSprite,\n\tITiledTile\n} from '../ITiledMap';\n\nimport { Sprite } from '@pixi/sprite';\nimport { Graphics } from '@pixi/graphics';\nimport { Config } from '../Config';\nimport { BuildPrimitive } from './../objects/TiledPrimitives';\nimport { TiledContainer } from './../objects/TiledContainer';\n\nexport function HexStringToHexInt(value: string | number): number {\n\tif (!value) return 0;\n\n\tif (typeof value == 'number') return value;\n\n\tvalue = value.length > 7 ? value.substr(3, 6) : value.substr(1, 6);\n\n\ttry {\n\t\treturn parseInt(value, 16);\n\t} catch (e) {\n\t\tconsole.warn('Color parse error:', e.message);\n\t\treturn 0;\n\t}\n}\n\nexport function HexStringToAlpha(value: string | number): number {\n\tif (!value) return 1;\n\tif (typeof value == 'number') return value;\n\n\tif (value.length <= 7) return 1;\n\n\ttry {\n\t\treturn parseInt(value.substr(1, 2), 16) / 255.0;\n\t} catch (e) {\n\t\tconsole.warn('Alpha parse error:', e.message);\n\t\treturn 1;\n\t}\n}\n\nexport function resolveTile(tilesets: ITiledTileset[], gid: number) {\n\tlet tileSet = undefined; //_data.tilesets[0];\n\tlet tilesetId = 0;\n\n\tfor (let i = 0; i < tilesets.length; i++) {\n\t\tif (tilesets[i].firstgid <= gid) {\n\t\t\ttileSet = tilesets[i];\n\t\t\ttilesetId = i;\n\t\t}\n\t}\n\n\tif (!tileSet) {\n\t\tconsole.error('Image with gid:' + gid + ' not found!');\n\t\treturn null;\n\t}\n\n\tconst realGid = gid - tileSet.firstgid;\n\n\tlet find = undefined;\n\tif (tileSet.tiles !== undefined)\n\t{\n\t\tfind = tileSet.tiles!.filter(obj => obj.id == realGid)[0];\n\t}\n\tif (find === undefined)\n\t{\n\t\tfind = {id: realGid} as ITiledTile; \n\t}\n\n\tlet img = Object.assign({}, find, { tilesetId });\n\n\tif (!img) {\n\t\tconsole.error('Load res MISSED gid:' + realGid);\n\t\treturn null;\n\t}\n\n\treturn img;\n}\n\nexport function _prepareProperties(layer: ITiledMap | ITiledLayer | ITiledObject) {\n\tlet props: IParsedProps = {};\n\n\tif (layer.properties) {\n\t\tif (layer.properties instanceof Array) {\n\t\t\tfor (var p of layer.properties) {\n\t\t\t\tlet val = p.value;\n\t\t\t\tif (p.type == 'color') {\n\t\t\t\t\tval = HexStringToHexInt(val as string);\n\t\t\t\t}\n\t\t\t\tprops[p.name] = val;\n\t\t\t}\n\t\t} else {\n\t\t\t// old tiled format\n\t\t\tprops = layer.properties;\n\t\t}\n\t}\n\n\tconst spriteObject = layer as ITiledSprite;\n\n\t// http://doc.mapeditor.org/en/stable/reference/tmx-map-format/#tile-flipping\n\tif (spriteObject.gid > 0) {\n\t\tconst gid = spriteObject.gid;\n\n\t\tconst vFlip = !!(gid & 0x40000000);\n\t\tconst hFlip = !!(gid & 0x80000000);\n\t\tconst dFlip = !!(gid & 0x20000000);\n\n\t\tprops['vFlip'] = vFlip;\n\t\tprops['hFlip'] = hFlip;\n\t\tprops['dFlip'] = dFlip;\n\n\t\tspriteObject.vFlip = vFlip;\n\t\tspriteObject.hFlip = hFlip;\n\n\t\tconst realGid = gid & ~(0x40000000 | 0x80000000 | 0x20000000);\n\t\tspriteObject.gid = realGid;\n\t}\n\n\tlayer.parsedProps = props;\n}\n\nexport function ApplyMeta(meta: ITiledObject | ITiledLayer, target: TiledContainer) {\n\ttarget.name = meta.name;\n\ttarget.tiledId = meta.id;\n\ttarget.width = meta.width || target.width;\n\ttarget.height = meta.height || target.height;\n\ttarget.rotation = (((meta as ITiledObject).rotation || 0) * Math.PI) / 180.0;\n\n\ttarget.x = (meta.x || 0) + ((meta as ITiledLayer).offsetx || 0);\n\ttarget.y = (meta.y || 0) + ((meta as ITiledLayer).offsety || 0);\n\n\ttarget.visible = meta.visible == undefined ? true : meta.visible;\n\ttarget.types = meta.type ? meta.type.split(\":\") : [];\n\n\ttarget.primitive = BuildPrimitive(meta as ITiledObject);\n\n\tconst props = meta.parsedProps;\n\n\tif (props) {\n\t\tif (!isNaN(props.opacity as number)) {\n\t\t\ttarget.alpha = Number(props.opacity);\n\t\t}\n\n\t\t//@ts-ignore\n\t\tObject.assign(target, props);\n\n\t\ttarget.properties = props;\n\t}\n\n\ttarget.source = meta;\n\n\tif (Config.debugContainers) {\n\t\tsetTimeout(() => {\n\t\t\tconst rect = new Graphics();\n\n\t\t\trect.lineStyle(2, 0xff0000, 0.7)\n\t\t\t\t.drawRect(target.x, target.y, meta.width, meta.height)\n\t\t\t\t.endFill();\n\t\t\tif (target instanceof Sprite) {\n\t\t\t\trect.y -= target.height;\n\t\t\t}\n\n\t\t\ttarget.parent.addChild<any>(rect);\n\t\t}, 30);\n\t}\n}","import { Sprite } from '@pixi/sprite';\nimport { ITiledTile, ITiledSprite, ITiledObjectLayer } from './../ITiledMap';\nimport { TileAnimator } from './TiledAnimator';\nimport { Config } from './../Config';\nimport { BuildPrimitive } from './TiledPrimitives';\nimport { ITiledPtimitive } from './TiledPrimitives';\nimport { ApplyMeta } from '../tools/Utils';\n\nexport class TiledSprite extends Sprite {\n\tpublic tileFrame?: ITiledTile;\n\tpublic source?: ITiledSprite;\n\tpublic primitives: ITiledPtimitive[] = [];\n\tpublic properties: Record<string, any> = {};\n\t\n\tprivate _animator?: TileAnimator;\n\n\tconstructor(source: ITiledSprite, createAnimator = false, autoInit = true) {\n\t\tsuper(source.image!.texture);\n\n\t\tthis.source = source;\n\t\tthis.tileFrame = source.image!;\n\n\t\tif (createAnimator && this.tileFrame.animation) {\n\t\t\tthis.anim = new TileAnimator(this.tileFrame!);\n\t\t}\n\n\t\tif(autoInit) {\n\t\t\tthis.init();\n\t\t}\n\t}\n\n\tinit() {\n\t\tApplyMeta(this.source!, this as any);\n\n\t\tif (this.anim) {\n\t\t\tconst a = this.anim.anim;\n\n\t\t\tthis.properties!.animPlaying && a.play();\n\t\t\ta.loop = this.properties!.animLoop !== undefined ? !!this.properties!.animLoop : true;\n\t\t}\n\n\t\t//TODO Set anchor and offsets to center (.5, .5)\n\t\tif (this.source!.gid) {\n\t\t\tthis.anchor.copyFrom( (this.source!.anchor ||  Config.defSpriteAnchor) as any);\n\t\t}\n\n\t\tconst obj = this.tileFrame!.objectgroup as ITiledObjectLayer;\n\n\t\tif (obj) {\n\t\t\tthis.primitives = obj.objects.map(e => BuildPrimitive(e)!);\n\t\t}\n\n\t\tconst hFlip = this.source!.hFlip;\n\t\tconst vFlip = this.source!.vFlip;\n\n\t\tif (hFlip) {\n\t\t\tthis.scale.x *= -1;\n\t\t\tthis.anchor.x = 1;\n\t\t}\n\n\t\tif (vFlip) {\n\t\t\tthis.scale.y *= -1;\n\t\t\tthis.anchor.y = 0;\n\t\t}\n\t}\n\n\tset anim(anim: TileAnimator | undefined) {\n\t\tif (anim === this._animator) return;\n\n\t\tif (this._animator) {\n\t\t\tthis._animator.remove(this);\n\t\t}\n\t\tthis._animator = anim;\n\n\t\tanim && anim.add(this);\n\t}\n\n\tget anim() {\n\t\treturn this._animator;\n\t}\n\n\tclone() {\n\t\tconst sprite = new TiledSprite(this.source!, true);\n\t\tsprite.init();\n\n\t\treturn sprite;\n\t}\n}\n","import { TiledContainer } from \"./../objects/TiledContainer\";\nimport { Config } from \"../Config\";\nimport { Rectangle } from \"@pixi/math\";\nimport { Texture } from \"@pixi/core\";\n\nimport { ITiledObject, ITiledSprite } from \"../ITiledMap\";\nimport { TiledSprite } from \"./../objects/TiledSprite\";\nimport { ApplyMeta } from \"../tools/Utils\";\n\nexport function Build(meta: ITiledObject): TiledContainer | TiledSprite {\n\tconst types: Array<string> = meta.type ? meta.type.split(\":\") : [];\n\n\tlet container = undefined; // new TiledOG.TiledContainer();\n\n\tif (types.indexOf(\"mask\") > -1) {\n\t\tconst source = {\n\t\t\timage: {\n\t\t\t\ttexture: Texture.WHITE,\n\t\t\t\tid: - 1,\n\t\t\t},\n\t\t\tfromImageLayer: true\n\t\t} as ITiledSprite\n\t\tcontainer = new TiledSprite(source);\n\t} else {\n\t\tcontainer = new TiledContainer();\n\t\tApplyMeta(meta, container as TiledContainer);\n\t}\n\n\tif (meta.gid) {\n\t\tcontainer.pivot = Config.defSpriteAnchor as any;\n\t\t(<TiledContainer> container).hitArea = new Rectangle(0, 0, meta.width, meta.height);\n\t}\n\n\treturn container;\n}\n","\nimport { Sprite } from \"@pixi/sprite\";\nimport { ITiledSprite } from \"../ITiledMap\";\nimport { TiledSprite } from \"./../objects/TiledSprite\";\n\nexport function Build(meta: ITiledSprite): TiledSprite {\n\t// legacy\n\tconst sprite = new TiledSprite(meta, true);\n\n\treturn sprite;\n}\n","import { TiledContainer } from \"./../objects/TiledContainer\";\nimport { Text, TextStyle } from \"@pixi/text\";\nimport { Config } from \"../Config\";\nimport * as Utils from \"../tools/Utils\";\nimport { ITiledObject } from \"../ITiledMap\";\nimport { ApplyMeta } from \"../tools/Utils\";\n\nexport function Build(meta: ITiledObject): TiledContainer {\n\tconst container = new TiledContainer();\n\tconst text = meta.text!;\n\n\tlet pixiText = new Text(text.text, {\n\t\twordWrap: text.wrap,\n\t\twordWrapWidth: meta.width,\n\t\tfill: Utils.HexStringToHexInt(text.color || \"#000000\") || 0x000000,\n\t\talign: text.valign || \"top\",\n\t\tfontFamily: text.fontfamily || \"sans-serif\",\n\t\tfontWeight: text.bold ? \"bold\" : \"normal\",\n\t\tfontStyle: text.italic ? \"italic\" : \"normal\",\n\t\tfontSize: text.pixelsize || \"16px\"\n\t} as TextStyle);\n\n\t//@ts-ignore\n\tpixiText.name = meta.name + \"_Text\";\n\n\tpixiText.roundPixels = !!Config.roundFontAlpha;\n\n\tconst props = meta.parsedProps;\n\n\t// clear properties\n\tmeta.properties = [];\n\tmeta.parsedProps = {};\n\n\tApplyMeta(meta, container);\n\tcontainer.pivot.set(0, 0);\n\n\tswitch (text.halign) {\n\t\tcase \"right\":\n\t\t\t{\n\t\t\t\tpixiText.anchor.x = 1;\n\t\t\t\tpixiText.position.x = meta.width;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"center\":\n\t\t\t{\n\t\t\t\tpixiText.anchor.x = 0.5;\n\t\t\t\tpixiText.position.x = meta.width * 0.5;\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\t{\n\t\t\t\tpixiText.anchor.x = 0;\n\t\t\t\tpixiText.position.x = 0;\n\t\t\t}\n\t\t\tbreak;\n\t}\n\n\tswitch (text.valign) {\n\t\tcase \"bottom\":\n\t\t\t{\n\t\t\t\tpixiText.anchor.y = 1;\n\t\t\t\tpixiText.position.y = meta.height;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"center\":\n\t\t\t{\n\t\t\t\tpixiText.anchor.y = 0.5;\n\t\t\t\tpixiText.position.y = meta.height * 0.5;\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\t{\n\t\t\t\tpixiText.anchor.y = 0;\n\t\t\t\tpixiText.position.y = 0;\n\t\t\t}\n\t\t\tbreak;\n\t}\n\n\tif (props) {\n\t\tpixiText.style.stroke =\n\t\t\tUtils.HexStringToHexInt(props.strokeColor as string) || 0;\n\n\t\tpixiText.style.strokeThickness = +props.strokeThickness || 0;\n\t\tpixiText.style.padding = +props.fontPadding || 0;\n\n\t\tObject.assign(pixiText, props);\n\t}\n\n\t//_cont.parentGroup = _layer.group;\n\tcontainer.addChild(<any> pixiText);\n\n\t//@ts-ignore\n\tcontainer.text = pixiText;\n\n\tcontainer.properties = props;\n\n\treturn container;\n}","import type { Texture } from \"@pixi/core\";\nimport type { Spritesheet } from \"@pixi/spritesheet\";\n\nexport class MultiSpritesheet {\n\tsheets: Array<Spritesheet | MultiSpritesheet> = [];\n\timages: { [name: string]: Texture<any> } = {};\n\n\tconstructor(sheets?: Spritesheet[]) {\n\t\tif (sheets) {\n\t\t\tsheets.forEach(element => {\n\t\t\t\tthis.add(element);\n\t\t\t});\n\t\t}\n\t}\n\n\tadd(sheet?: Spritesheet | MultiSpritesheet) {\n\t\tif (!sheet) throw \"Sheet can't be undefined\";\n\t\tif (sheet === this) throw \"U can't add self to spritesheet\";\n\n\t\tthis.sheets.push(sheet);\n\t}\n\n\taddTexture(tex: Texture, id: string) {\n\t\tthis.images[id] = tex;\n\t}\n\n\tget textures(): { [name: string]: Texture<any> } {\n\t\tlet map: { [name: string]: Texture<any> } = {};\n\n\t\tfor (const spr of this.sheets) {\n\t\t\tObject.assign(map, spr.textures);\n\t\t}\n\n\t\tObject.assign(map, this.images);\n\n\t\treturn map;\n\t}\n\n\tget animations(): { [name: string]: Texture[] } {\n\t\tlet map: { [name: string]: Texture[] } = {};\n\n\t\tfor (const spr of this.sheets) {\n\t\t\t// can be looped\n\t\t\tObject.assign(map, spr.animations);\n\t\t}\n\n\t\treturn map;\n\t}\n}\n","import { ITiledTileset, ITiledTile } from '../ITiledMap';\nimport { MultiSpritesheet } from './TiledMultiSheet';\nimport { resolveTile } from './Utils';\n\nimport { Spritesheet } from '@pixi/spritesheet';\nimport { Rectangle } from '@pixi/math';\nimport { Texture, BaseTexture, ImageResource } from '@pixi/core';\nimport { EventEmitter } from '@pixi/utils';\n\nexport class TilesetManager extends EventEmitter {\n\tprivate _sheet: MultiSpritesheet = new MultiSpritesheet();\n\tprivate _loadQueue: number = 0;\n\n\t/**\n\t * @description Base url for all images\n\t */\n\tpublic baseUrl: string = '';\n\n\t/**\n\t * @description Preload images which not exist in spritesheet\n\t */\n\tpublic loadUnknowImages: boolean = true;\n\n\tconstructor(private _tileSets: ITiledTileset[], sheet?: MultiSpritesheet | Spritesheet | Record<string, Texture<any>>) {\n\t\tsuper();\n\n\t\tif (sheet) {\n\t\t\tif (sheet!.textures) {\n\t\t\t\tthis.register(sheet as MultiSpritesheet);\n\t\t\t} else {\n\t\t\t\tObject.keys(sheet).forEach(e => {\n\t\t\t\t\tthis._sheet.addTexture((sheet as Record<string, Texture>)[e], e);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tregister(spritesheet: MultiSpritesheet | Spritesheet) {\n\t\tthis._sheet.add(spritesheet);\n\t}\n\n\tget spritesheet() {\n\t\treturn this._sheet;\n\t}\n\n\tgetTileByGid(gid: number, tryLoad = this.loadUnknowImages): ITiledTile | undefined {\n\t\tconst tile = resolveTile(this._tileSets, gid);\n\t\treturn this.getTileByTile(tile, tryLoad);\n\t}\n\n\tgetTileByTile(tile: ITiledTile | null, tryLoad = this.loadUnknowImages, skipAnim = false) {\n\t\tif (!tile) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst set = this._tileSets[tile.tilesetId!];\n\n\t\tif(!tile.image && set.image) {\n\t\t\ttile.fromSheet = true;\n\t\t\ttile.image = set.image;\n\t\t}\n\n\t\tif(!tile.image) {\n\t\t\treturn undefined;\n\t\t};\n\n\t\tif (tile.animation && !skipAnim) {\n\t\t\ttile.animation.forEach(e => {\n\t\t\t\tconst atile = set.tiles!.filter(obj => obj.id == e.tileid)[0];\n\t\t\t\tatile.tilesetId = tile.tilesetId;\n\t\t\t\te.texture = this.getTileByTile(atile, tryLoad, true)!.texture;\n\t\t\t\te.time = e.duration;\n\t\t\t});\n\t\t}\n\n\t\tlet texture = this.spritesheet.textures[tile.image];\n\n\t\ttile.lazyLoad = !(texture != undefined && texture.valid);\n\n\t\tconst absUrl = this._relativeToAbsolutePath(this.baseUrl, tile.image!);\n\t\t//Texture not found by relative path\n\t\tif (!texture) {\n\t\t\t//Try to find by absolute path\n\t\t\ttexture = this.spritesheet.textures[absUrl];\n\t\t}\n\n\t\tif (!texture && tryLoad) {\n\t\t\ttexture = this._tryLoadTexture(absUrl, tile);\n\n\t\t\ttile.lazyLoad = true;\n\n\t\t\tthis._sheet.addTexture(texture, tile.image);\n\t\t}\n\n\t\tif(texture && tile.fromSheet) {\n\t\t\ttexture = this._cropTile(set, tile, texture);\n\t\t}\n\n\t\ttile.texture = texture;\n\t\treturn tile;\n\t}\n\n\tgetTileSetByGid(gid: number): ITiledTileset | undefined {\n\t\tconst frame = resolveTile(this._tileSets, gid);\n\t\t\n\t\tif(!frame) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn this._tileSets[frame!.tilesetId];\n\t}\n\n\t_relativeToAbsolutePath(base: String, relative: String) {\n\t\tvar stack = base.split(\"/\"),\n\t\t\t\tparts = relative.split(\"/\");\n\t\tstack.pop();\n\t\tfor (var i=0; i<parts.length; i++) {\n\t\t\t\tif (parts[i] == \".\")\n\t\t\t\t\t\tcontinue;\n\t\t\t\tif (parts[i] == \"..\")\n\t\t\t\t\t\tstack.pop();\n\t\t\t\telse\n\t\t\t\t\t\tstack.push(parts[i]);\n\t\t}\n\n\t\t//Remove trailing dot\n\t\tif (stack[0] == '.')\n\t\t{\n\t\t\tstack.shift();\n\t\t}\n\t\t\n\t\treturn stack.join(\"/\");\n\t}\n\n\t_cropTile(set: ITiledTileset, tile: ITiledTile, texture: Texture) {\n\t\t\n\t\tconst colls = set.columns!;\n\t\tconst rows = set.tilecount! / colls;\n\t\tconst margin = set.margin! || 0;\n\t\tconst space = set.spacing! || 0;\n\t\tconst xId = tile.id % colls;\n\t\tconst yId = tile.id / colls | 0;\n\n\t\ttexture = new Texture(texture.baseTexture, new Rectangle(\n\t\t\ttexture._frame.x + margin + xId * (set.tilewidth! + space),\n\t\t\ttexture._frame.y + margin + yId * (set.tileheight! + space),\n\t\t\tset.tilewidth, set.tileheight\n\t\t));\n\n\t\tthis._sheet.addTexture(texture, `${tile.image}_${tile.tilesetId}:${tile.id}`);\n\n\t\treturn texture;\n\t}\n\n\t_tryLoadTexture(url: string, tile: ITiledTile) {\n\t\t// @ts-ignore\n\t\tconst res = new ImageResource(url, {\n\t\t\tautoLoad: false,\n\t\t\tcrossorigin: 'anonymous',\n\t\t});\n\n\t\tconst texture = new Texture(new BaseTexture(res));\n\t\tTexture.addToCache(texture, url);\n\n\t\tthis._loadQueue++;\n\n\t\tres.load()\n\t\t\t.then(() => {\n\t\t\t\ttexture.emit('loaded');\n\t\t\t})\n\t\t\t.catch((e: any)=>{\n\t\t\t\tconsole.warn(`Tile set image loading error!`,tile);\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t\tthis._loadQueue--;\n\t\t\t\tif (this._loadQueue === 0) {\n\t\t\t\t\tthis.emit('loaded');\n\t\t\t\t}\n\t\t\t});\n\n\t\treturn texture;\n\t}\n\n\tget loaded() {\n\t\treturn this._loadQueue <= 0;\n\t}\n}\n","import { TiledContainer } from \"./TiledContainer\";\nimport { TilesetManager } from \"../tools/TilesetManagers\";\n\nexport class TiledMapContainer extends TiledContainer {\n\tpublic tileSet?: TilesetManager;\n}","import { Spritesheet } from '@pixi/spritesheet';\nimport { ILoaderResource, Loader } from '@pixi/loaders';\nimport { TiledContainer } from '../objects/TiledContainer';\nimport { Config, LayerBuildersMap } from '../Config';\n\nimport { MultiSpritesheet } from './TiledMultiSheet';\nimport { ITiledMap } from '../ITiledMap';\nimport { TilesetManager } from './TilesetManagers';\nimport { TiledMapContainer } from '../objects/TiledMapContainer';\nimport { EventEmitter } from '@pixi/utils';\nimport { utils, ExtensionType, extensions } from '@pixi/core';\nimport { LoaderParserPriority, LoadAsset, LoaderParser, AssetExtension, Assets } from '@pixi/assets';\n\n//inject new field in resources\ndeclare module GlobalMixins {\n\texport interface ILoaderResource {\n\t\tstage?: TiledContainer;\n\t}\n}\n\ntype tValidSheet = Spritesheet | MultiSpritesheet;\nlet showHello: boolean = true;\n\nlet TilesetCache: { [index: string]: any } = {};\n\nexport function CreateStage(\n\tsheet: tValidSheet | undefined,\n\t_data: ITiledMap,\n): TiledMapContainer | undefined {\n\n\tif (showHello) {\n\t\tconsole.log('[TILED] Importer!\\neXponenta {rondo.devil[a]gmail.com}');\n\t\tshowHello = false;\n\t}\n\n\tconst useDisplay: boolean = false;\n\tconst stage = new TiledMapContainer();\n\n\tstage.layerHeight = _data.height;\n\tstage.layerWidth = _data.width;\n\tstage.source = _data;\n\n\tstage.tileSet = new TilesetManager(_data.tilesets, sheet);\n\tstage.tileSet.baseUrl = _data.baseUrl;\n\n\tif (_data.layers) {\n\t\tlet zOrder = 0; //_data.layers.length;\n\n\t\tif (useDisplay) {\n\t\t\t_data.layers = _data.layers.reverse();\n\t\t}\n\n\t\tfor (let layer of _data.layers) {\n\t\t\tconst builder = LayerBuildersMap[layer.type];\n\n\t\t\tif (!builder) {\n\t\t\t\tconsole.warn(`[TILED] Importer can't support ${layer.type} layer type!`);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst pixiLayer = builder.Build(layer, stage.tileSet, zOrder, stage);\n\n\t\t\tif (!pixiLayer) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tzOrder++;\n\t\t\tstage.layers = {\n\t\t\t\t[layer.name]: pixiLayer,\n\t\t\t};\n\n\t\t\tstage.addChild(pixiLayer);\n\t\t}\n\t}\n\treturn stage;\n}\nconst cropName = new RegExp(/^.*[\\\\\\/]/);\n\nconst TiledMapAsset = {\n\textension: ExtensionType.Asset,\n\tdetection: {\n\t\ttest: async() =>  { return true;},\n\t\tadd: async (formats:any) => { return [...formats, \"json\"]; },\n\t\tremove: async (formats:any) => { return formats.filter((ext:any) => ext == \"json\")}\n\t},\n\tloader: {\n\t\textension: {\n\t\t\ttype: ExtensionType.LoadParser,\n\t\t\tpriority: LoaderParserPriority.Low\n\t\t},\n\t\ttestParse(asset: any, loadAsset?: LoadAsset, loader?: Loader): Promise<boolean>\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tif (asset && asset.type == 'map')\n\t\t\t\t{\n\t\t\t\t\tresolve(true);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresolve(false);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tparse(map: ITiledMap, loadedAsset: any, loader?: Loader): Promise<ITiledMap>\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {\t\n\t\t\t\tlet baseUrl = loadedAsset.src.replace((this as any).baseUrl, '');\n\t\t\t\tbaseUrl = baseUrl.match(cropName)![0];\n\t\t\t\tmap.baseUrl = baseUrl;\n\n\t\t\t\tconst tilesetsToLoad = [];\n\t\t\t\tfor (let  tilesetIndex = 0; tilesetIndex < map.tilesets.length; tilesetIndex++)\n\t\t\t\t{\n\t\t\t\t\tconst tileset = map.tilesets[tilesetIndex];\n\t\t\t\t\tif (tileset.source !== undefined)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet cachedTileset = TilesetCache[tileset.source];\n\t\t\t\t\t\tif (cachedTileset)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmap.tilesets[tilesetIndex] = cachedTileset;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse \n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttilesetsToLoad.push(tileset);\n\t\t\t\t\t\t\tTilesetCache[tileset.source] = tileset;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\t\t\t\n\t\t\t\tif (tilesetsToLoad.length == 0)\n\t\t\t\t{\n\t\t\t\t\tresolve(map as ITiledMap);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet  tilesetsList = [];\n\t\t\t\t\tfor (let tilesetIndex = 0; tilesetIndex < tilesetsToLoad.length; tilesetIndex++)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet tileset = tilesetsToLoad[tilesetIndex];\n\t\t\t\t\t\tif (tileset.source !== undefined)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlet name = utils.path.basename(tileset.source);\n\t\t\t\t\t\t\ttilesetsList.push(name);\n\t\t\t\t\t\t\tAssets.add(name, baseUrl + tilesetsToLoad[tilesetIndex].source);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tAssets.load(tilesetsList).then((resources)=>{\n\t\t\t\t\t\tObject.keys(resources).forEach(resourcePath => {\n\t\t\t\t\t\t\tlet tilesetResource = resources[resourcePath];\n\t\t\t\t\t\t\tlet resourceFileName =  resourcePath.replace(cropName, '');\n\t\t\t\t\t\t\tfor (let  tilesetIndex = 0; tilesetIndex < map.tilesets.length; tilesetIndex++)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst tileset = map.tilesets[tilesetIndex];\n\t\t\t\t\t\t\t\tif (tileset.source === resourceFileName)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tObject.assign(tileset, tilesetResource);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} \n\t\t\t\t\t\t});\n\t\t\t\t\t\tresolve(map as ITiledMap);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t} as LoaderParser<ITiledMap>\n} as AssetExtension;\n\nextensions.add(TiledMapAsset);\n\nexport { TiledMapAsset };\n","import { DisplayObject, Container } from \"@pixi/display\";\nimport { Matrix } from \"@pixi/math\";\n\n\nexport default function (container: typeof Container) {\n\n\tif (!container)\n\t\tthrow new Error(\"Cant't find Container in package!\");\n\n\t/**\n\t * @mixes\n\t * MIXIN FROM pixiv5-tiled\n\t * Get child by path\n\t */\n\n\tObject.assign(container.prototype,\n\t\t{\n\t\t\tgetChildByPath: function <T extends DisplayObject>(path: string) {\n\t\t\t\tconst _this = <Container> <any> this;\n\t\t\t\t\n\t\t\t\tif (!_this.children || _this.children.length == 0)\n\t\t\t\t\treturn undefined;\n\n\t\t\t\tlet result: DisplayObject | undefined = _this;\n\n\t\t\t\tconst split = path.split(\"/\");\n\t\t\t\tconst isIndex = new RegExp(\"(?:{{0})-?d+(?=})\");\n\n\t\t\t\tfor (const p of split) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tif (result == undefined || !(result.children)) {\n\t\t\t\t\t\tresult = undefined;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (p.trim().length == 0) continue;\n\n\t\t\t\t\t// find by index\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tconst ch = result.children;\n\t\t\t\t\tconst mathes = p.match(isIndex);\n\t\t\t\t\tif (mathes) {\n\t\t\t\t\t\tlet index = parseInt(mathes[0]);\n\t\t\t\t\t\tif (index < 0) {\n\t\t\t\t\t\t\tindex += ch.length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (index >= ch.length) {\n\t\t\t\t\t\t\tresult = undefined;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult = ch[index];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t//default by name\n\t\t\t\t\tresult = (result as any).getChildByName(p);\n\t\t\t\t}\n\n\t\t\t\treturn result as T;\n\t\t\t},\n\n\t\t\taddGlobalChild: function (...child: DisplayObject[]) {\n\t\t\t\tconst _this = <Container> <any> this;\n\t\t\t\t//TODO: better to convert global position to current matrix\n\t\t\t\t_this.transform.updateLocalTransform();\n\t\t\t\t\n\t\t\t\tconst loc = new Matrix();\n\t\t\t\tconst invert = _this.transform.localTransform.clone().invert();\n\t\t\t\t\n\t\t\t\tfor (let i = 0; i < child.length; i++) {\n\n\t\t\t\t\tconst newChild = child[i];\n\t\t\t\t\tnewChild.transform.updateLocalTransform();\n\t\t\t\t\tloc.copyFrom(invert);\n\t\t\t\t\tloc.append(newChild.localTransform);\n\t\t\t\t\tchild[i].transform.setFromMatrix(loc);\n\t\t\t\t}\n\n\t\t\t\treturn _this.addChild(...child);\n\n\t\t\t}\n\t\t});\n}\n","import { DisplayObject } from '@pixi/display';\n\nexport default function(displayObject: typeof DisplayObject) {\n\n\tif(!displayObject)\n\t\tthrow new Error(\"Cant't find DisplayObject in package!\");\n\t\n\t(<any>displayObject.prototype).replaceWithTransform = function(from: any) {\n        from.updateTransform();\n\n        if(from.parent){\n\t\t\tfrom.parent.addChildAt(this, from.parent.getChildIndex(from));\n\t\t}\n\n\t\tthis.pivot.copyFrom(from.pivot);        \n        this.position.copyFrom(from.position);\n\t\tthis.scale.copyFrom(from.scale);\n\t\tthis.rotation = from.rotation;\n\n        this.updateTransform();\n    }\n}","import { EventEmitter } from '@pixi/utils';\n\nexport default function(eventEmitter: typeof EventEmitter) {\n\tif(!eventEmitter)\n\t\tthrow new Error(\"Cant't find utils in package!\");\n\n    (<any> eventEmitter.prototype).onceAsync = function(event: string, context? : any) : Promise<any> {\n        return new Promise((res)=>{\n            this.once(event, res, context);\n        })\n    }\n}","import { DisplayObject, Container } from '@pixi/display';\nimport { EventEmitter } from '@pixi/utils';\n\n\nimport container from \"./ContainerExt\";\nimport display from \"./DisplayExt\";\nimport emitter from \"./EventEmitterExt\";\n \nexport function InjectMixins(pixiPackage? : any) {\n    if (pixiPackage) {\n        console.log('Deprication. Mixins attached automatically')\n    }\n\n    container(Container);\n    display(DisplayObject);\n    emitter(EventEmitter);\n}\n","import { ITiledLayer } from '../ITiledMap';\nimport { _prepareProperties, ApplyMeta } from '../tools/Utils';\nimport { TiledContainer} from './../objects/TiledContainer';\nimport { TilesetManager } from '../tools/TilesetManagers';\n\nexport interface ILayerBuilder {\n\tBuild(meta: ITiledLayer, tileset: TilesetManager, ...args: any[]): TiledContainer | undefined;\n};\n\nexport const LayerBuilder = {\n\tBuild(layer: ITiledLayer, tileset: TilesetManager, zOrder = 0): TiledContainer | undefined {\n\t\t_prepareProperties(layer);\n\n\t\tconst props = layer.parsedProps;\n\n\t\tif (props.ignore || props.ignoreLoad) {\n\t\t\tconsole.log('[TILED] layer ignored:' + layer.name);\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst layerObject: TiledContainer = new TiledContainer();\n\n\t\tlayerObject.tiledId = layer.id;\n\t\tlayerObject.name = layer.name;\n\t\tlayerObject.visible = layer.visible;\n\n\t\tlayerObject.position.set(layer.x, layer.y);\n\t\tlayerObject.alpha = layer.opacity || 1;\n\n\t\tApplyMeta(layer, layerObject);\n\t\treturn layerObject;\n\t},\n};\n","import { ITiledLayer, ITiledImageLayer, ITiledObjectLayer, ITiledSprite, ITiledObject } from '../ITiledMap';\nimport { TiledContainer } from '../objects/TiledContainer';\nimport { LayerBuilder } from './LayerBuilder';\nimport { TilesetManager } from '../tools/TilesetManagers';\nimport { _prepareProperties } from '../tools/Utils';\n\nimport * as SB from '../builders/SpriteBuilder';\nimport * as TB from '../builders/TextBuilder';\nimport * as CB from '../builders/ContainerBuilder';\n\nimport { TiledSprite } from '../objects/TiledSprite';\nimport { TiledObjectType, Objectype } from '../tools/TiledObjectType';\n\nexport const ObjectLayerBuilder = {\n\t__gen: <Record<TiledObjectType, (...args: any[]) => TiledContainer | TiledContainer>>{\n\t\t[TiledObjectType.IMAGE](meta: ITiledObject, tileset: TilesetManager) {\n\t\t\tconst smeta = meta as ITiledSprite;\n\t\t\tconst frame = smeta.image ? tileset.getTileByTile(smeta.image!) : tileset.getTileByGid(smeta.gid);\n\n\t\t\tsmeta.image = frame;\n\n\t\t\tconst sprite = SB.Build(smeta) as TiledSprite;\n\n\t\t\tif (smeta.fromImageLayer && frame!.lazyLoad) {\n\t\t\t\tframe!.texture.once('loaded', () => {\n\t\t\t\t\tsprite.scale.set(1);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (smeta.fromImageLayer) {\n\t\t\t\tsprite.anchor.set(0);\n\t\t\t}\n\n\t\t\treturn (sprite as any) as TiledContainer;\n\t\t},\n\t\t[TiledObjectType.TEXT](meta: ITiledObject, tileset: TilesetManager) {\n\t\t\treturn TB.Build(meta);\n\t\t},\n\t\t[TiledObjectType.DEFAULT](meta: ITiledObject, tileset: TilesetManager) {\n\t\t\treturn CB.Build(meta);\n\t\t},\n\t},\n\n\tBuild(layer: ITiledLayer, tileset: TilesetManager, zOrder = 0): TiledContainer | undefined {\n\t\tconst objLayer = layer as ITiledObjectLayer;\n\t\tconst layerContatiner = LayerBuilder.Build(layer, tileset, zOrder);\n\n\t\tif (!layerContatiner) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (layer.type === 'imagelayer') {\n\t\t\tif (!this.__convertLayer(layer as ITiledImageLayer)) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}\n\n\t\tif (!objLayer.objects || !objLayer.objects.length) {\n\t\t\treturn layerContatiner;\n\t\t}\n\n\t\tconst objects = objLayer.objects;\n\n\t\tlet localZIndex = 0;\n\n\t\tfor (let objMeta of objects) {\n\t\t\t_prepareProperties(objMeta);\n\n\t\t\tconst type = Objectype(objMeta);\n\t\t\tconst method = this.__gen[type] || this.__gen[TiledObjectType.DEFAULT];\n\t\t\tconst obj = method!.call(this, objMeta, tileset);\n\n\t\t\tif (!obj) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t/*\n\t\t\tif (Config.usePixiDisplay) {\n\t\t\t\t(obj as any).parentGroup = (layerContatiner as any).group;\n\t\t\t\tstage.addChildAt(pixiObject, localZIndex);\n\t\t\t} else {\n\t\t\t\t*/\n\n\t\t\tlayerContatiner.addChildAt(obj, localZIndex);\n\t\t\t//}\n\n\t\t\tlocalZIndex++;\n\t\t}\n\n\t\treturn layerContatiner;\n\t},\n\n\t__convertLayer(imageLayer: ITiledImageLayer) {\n\t\tif (!imageLayer.image) {\n\t\t\treturn false;\n\t\t}\n\n\t\t(imageLayer as any).objects = [\n\t\t\t{\n\t\t\t\timage: {\n\t\t\t\t\timage: imageLayer.image,\n\t\t\t\t},\n\t\t\t\t//imageLayer can't has gid ID\n\n\t\t\t\tgid: -1,\n\t\t\t\tname: imageLayer.name,\n\t\t\t\tx: imageLayer.x,\n\t\t\t\ty: imageLayer.y,\n\n\t\t\t\tfromImageLayer: true,\n\t\t\t\tproperties: imageLayer.properties,\n\t\t\t\tparsedProps: imageLayer.parsedProps,\n\t\t\t} as ITiledSprite,\n\t\t];\n\t\treturn true;\n\t},\n};\n","import { ITiledLayer, ITiledTileLayer, ITiledMap, ITiledTile, ITiledSprite } from '../ITiledMap';\nimport { TilesetManager } from '../tools/TilesetManagers';\nimport { LayerBuilder } from './LayerBuilder';\nimport { TiledMapContainer } from '../objects/TiledMapContainer';\nimport { TiledSprite } from '../objects/TiledSprite';\nimport { Config } from '../Config';\nimport { TiledContainer } from '../index';\nimport { TileAnimator } from '../objects/TiledAnimator';\n\nexport const TiledLayerBuilder = {\n\tBuild(layer: ITiledLayer, set: TilesetManager, zOrder: number = 0, tileMap: TiledMapContainer) {\n\t\tconst tiledLayer = layer as ITiledTileLayer;\n\t\tconst tileMapSource: ITiledMap = tileMap.source! as ITiledMap;\n\t\tconst layerContatiner = LayerBuilder.Build(layer, set, zOrder) as TiledContainer & {animators: Map<string, TileAnimator> };\n\n\t\tif(!layerContatiner) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst data = this.__decodeData(tiledLayer);\n\t\tconst { width, height } = layer;\n\t\tconst { tileheight, tilewidth } = tileMapSource;\n\n\t\tvar xWeights = {\n\t\t\tx: 0,\n\t\t\ty: 0\n\t\t};\n\t\tvar yWeights = {\n\t\t\tx: 0,\n\t\t\ty: 0\n\t\t};\n\t\tvar mapOrientationShift = {\n\t\t\tx: 0,\n\t\t\ty: 0\n\t\t};\n\t\tswitch (tileMapSource.orientation)\n\t\t{\n\t\t\tcase \"orthogonal\":\n\t\t\t\txWeights.x = tilewidth;\n\t\t\t\tyWeights.y = tileheight;\n\t\t\t\tbreak;\n\t\t\tcase \"isometric\":\n\t\t\t\txWeights.x = tilewidth / 2;\n\t\t\t\txWeights.y = -tilewidth / 2;\n\t\t\t\tyWeights.x = tileheight / 2;\n\t\t\t\tyWeights.y = tileheight / 2;\n\t\t\t\tmapOrientationShift.x = (height - 1) * xWeights.x;\n\t\t\t\tmapOrientationShift.y = -tileheight/2;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst genTile = (x: number, y: number, gid: number)=>{\n\t\t\tconst tile = set.getTileByGid(gid);\n\n\t\t\tconst s = new TiledSprite({\n\t\t\t\timage: tile,\n\t\t\t\tfromImageLayer: false,\n\t\t\t\tgid: gid,\n\t\t\t\tanchor: {x: 0, y: 0}\n\t\t\t} as ITiledSprite);\n\t\t\t\n\t\t\ts.x = x * xWeights.x + y * xWeights.y + mapOrientationShift.x;\n\t\t\ts.y = x * yWeights.x + y * yWeights.y + mapOrientationShift.y - (tile!.imageheight === undefined ? 0 : tile!.imageheight - tileheight);\n\t\t\ts.roundPixels = Config.roundPixels;\n\n\t\t\tif(tile && tile.animation) {\n\t\t\t\tconst animators = layerContatiner.animators || new Map();\n\t\t\t\tconst animId = tile.tilesetId + \"_\" + tile.id;\n\n\t\t\t\tlet animator = animators.get(animId);\n\t\t\t\tif(!animator) {\n\t\t\t\t\tanimator = new TileAnimator(tile);\n\t\t\t\t\tanimators.set(animId, animator);\n\t\t\t\t}\n\n\t\t\t\ts.anim = animator;\n\t\t\t\tanimator.anim.play();\n\t\t\t}\n\n\t\t\treturn s;\n\t\t}\n\n\t\tfor (let y = 0; y < height; y++) {\n\t\t\tfor (let x = 0; x < width; x++) {\n\t\t\t\tconst index = x + y * width;\n\t\t\t\tconst gid = data[index];\n\n\t\t\t\t// skip gid 0,\n\t\t\t\tif(!gid) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlayerContatiner.addChild(genTile(x,y,data[index]));\n\t\t\t}\n\t\t}\n\n\t\treturn layerContatiner;\n\t},\n\n\t__decodeData(layer: ITiledTileLayer): number[] {\n\t\treturn layer.data;\n\t},\n};\n","declare global {\n\tinterface Window {\n\t\tPIXI: any;\n\t}\n}\n\nconst VERSION = '__VERSION__';\n\nimport * as ContainerBuilder from './builders/ContainerBuilder';\nimport * as SpriteBuilder from './builders/SpriteBuilder';\nimport * as TextBuilder from './builders/TextBuilder';\n\nimport { TiledMapAsset, CreateStage } from './tools/TiledObjectParser';\nimport { Config, ITiledProps, LayerBuildersMap } from './Config';\nimport { TiledContainer } from './objects/TiledContainer';\nimport { InjectMixins } from './pixi-utils';\nimport { extensions } from '@pixi/core';\n\n// prevent circular\nObject.assign(LayerBuildersMap, {\n\ttilelayer: TiledLayerBuilder,\n\tobjectgroup: ObjectLayerBuilder,\n\timagelayer: ObjectLayerBuilder,\n\tgroup: undefined,\n});\n\nexport function Inject(pixiPack = window.PIXI, props: Partial<ITiledProps> | undefined = undefined) {\n\tif (!pixiPack) {\n\t\tconsole.warn(\n\t\t\t\"Auto injection works only with globals scoped PIXI, not in modules\\nuse 'Loader.registerPlugin(Parser)' otherwith\",\n\t\t);\n\t\treturn;\n\t}\n\n\tif (props) {\n\t\tObject.assign(Config, props);\n\t}\n\n\tInjectMixins(pixiPack);\n}\n\nimport * as Primitives from './objects/TiledPrimitives';\nimport { MultiSpritesheet } from './tools/TiledMultiSheet';\nimport { ObjectLayerBuilder } from './layers/ObjectsLayerBuilder';\nimport { TiledLayerBuilder } from './layers/TiledLayerBuilder';\nexport { Primitives };\nexport { TiledMapAsset };\nexport { CreateStage };\nexport { Config };\nexport { ContainerBuilder };\nexport { SpriteBuilder };\nexport { TextBuilder };\nexport { TiledContainer };\nexport { MultiSpritesheet };\nexport { VERSION };\nexport { LayerBuildersMap};\nexport { ObjectLayerBuilder};\nexport * from './ITiledMap';"],"names":["Container","Point","AnimatedSprite","Rectangle","Polygon","Ellipse","Graphics","Sprite","Build","Texture","text","Text","Utils.HexStringToHexInt","EventEmitter","ImageResource","BaseTexture","ExtensionType","LoaderParserPriority","utils","Assets","extensions","Matrix","DisplayObject","SB.Build","TB.Build","CB.Build"],"mappings":"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"}